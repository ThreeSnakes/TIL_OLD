# NestJS

## NestJS란..?
Nest는 스스로를 "효율적이고 안정적이며 확장 가능한 서버 애플리케이션을 구축하기 위한 진보적인 Node.js 프레임워크라"고 소개하고 있으면서 "리액트, 뷰, 앵귤러처럼 개발자의 생산성이 향상되는 도구가 많이 만들어졌지만, 아키텍쳐의 주요 문제를 효과적으로 해결하지는 못하고 있다."라고 말합니다. 그러면서 Nest는 개발자와 팀이 고도로 테스트 가능하고 확장 가능하며 느슨하게 결합되고 유지관리가 쉬운 애플리케이션을 만들 수 있는 즉시 사용가능한 애플리케이션 아키텍쳐를 제공한다고 합니다.

저는 여기서 2가지가 궁금했습니다.
1. 프레임워크는 정확히 무엇을 말하는 것일까.
2. NestJS가 해결하고 싶었던 문제는 무엇일까.? express와는 무엇이 다를까.?

그러면 한가지씩 Google링을 통해서 찾은 답안을 공유해 봅니다.

### 프레임워크는 정확히 무엇을 말하는 것일까.?

"프레임워크란, 소프트웨어의 구체적인 부분에 해당하는 설계와 구현을 재사용이 가능하게끔 일련의 협업화된 형태로 클래스들을 제공하는 것" 라고 Gof의 랄프 존슨이 이야기했다고 합니다. 근데 잘 이해가 안가서 googling을 합니다. 찾았습니다.

우리가 사용하는 Express를 기준으로 이야기를 해보자. 우리가 사용하는 많은 대시보드 코드를 보면 기본적으로 Controller - lib(Service) 구조를 가지고 있다. 하지만 이는 우리가 임의로 정한 규칙으로 사실 규칙을 무시한다면 이는 개발자 성향대로 작성 할 수 있습니다. 그만큼 자유도가 높다는 것입니다.

하지만 Nest는 Controller, Service, Module이 각각의 역할을 가지고 있으며, 어떻게 사용해야 하는지 각각마다 사용방법이 존재합니다. 어떤 코드는 어디에 넣어야 하고, 어떤 구조로 작성해야 하는 것인지 제한을 두고 있습니다. 자율성이 떨어지는 대시 통일성이 증가하게 되는 것입니다.

그렇다면 이게 왜 중요할까..?

자유도가 높다는 것은 그만큼 개발자 각각의 스타일, 성향에 따라서 코드를 자유롭게 작성, 구성할 수 있다는 것입니다. http 요청을 하는 Module만 봐도 request, axios, superagent 등 다양하게 있습니다. 어떤 개발자는 axios를 쓰는 것을 선호할 수 있을것이고, 어떤 개발자는 superagent를 쓰는 것을 선호 할 수 있을것입니다. 이러한 높은 자유도는 장점이 될 수 도 있지만 점점 참여하는 개발자가 많아짐에 따라서 통일성을 해치게 될것 입니다. NestJS는 이런 문제를 개선하기 많은 기능을 프레임워크에 포함하고 있으며 Controller, Service, module 구조를 통해서 정형화되고 통일성 있는 구조를 만들 수 있도록 하였습니다. 

즉 Nodejs를 Django, Rails, Spring 처럼 만들어주는 것이라고 생각하시면 됩니다. 이런 프레임워크는 그럼 왜 쓰는 것일까요.? 

## NestJS 기본적인 설명
### 기본
- 다음 강의를 들어보시는 것을 추천드립니다.
	- [NestJS로 API만들기](https://nomadcoders.co/nestjs-fundamentals/lobby)
		- 2시간 내외, 무료

### Controller

### Provider

### Module

### Middleware




nest는 기본적으로 express 또는 Fastify 프레임워크를 래핑하는데, 개발자는 이를 선택하여 작업을 할 수 있습니다.

express는 

## Configuration
- 처음에는 dotenv를 쓰려고 작업을 진행하였다. nestjs 문서에도 dotenv를 쓰는것을 추천하고, 이를 이용해 작업하는 코드도 있다.
- 한데 현재 회사의 config 구조상 dotenv를 사용하는 것은 무리가 있다.
	- depth가 존재한다.
		- dotenv는 depth를 지원하지 않는다.
	- config가 JSON으로 되어 있다.
		- 만약 config를 dotenv로 변경하려면 기존 json파일을 dotenv 형태로 변경해서 이를 S3에 업로드 해주거나, json을 dotenv로 바꿔주는 transfiler가 필요하다. 이를 작업하기에는 일정 및 쓸데없는 시간낭비라 생각 된다.
		- 또한 production, staging, development 환경마다 config가 완벽하게 따로 존재하는게 아니라 이를 merge하는 형태로 되어 있다. 결국 ENV는 하나의 파일로 만들어져야 한다는 것인데, 이것 또한 영 꺼림직한 작업이다.