# 1. 도메인 모델 시작하기

## 1-1. 도메인이란 ?
- 소프트웨어로 해결하고자 하는 문제 영역.
- 책에서는 온라인 서점을 예제로 들었는데, 온라인 서점을 구현한다면 상품 조회, 주문, 결제, 배송 추적등 다양한 기능을 제공한다고 했을때 온라인 서점 자체가 도메인이 되는 것이다.
- 온라인 서점 도메인은 다시 상품 조회, 주문, 결제와 하위 도메인으로 구분 되며, 다른 하위 도메인과 연동하여 완전한 기능을 제공한다.

## 1-2. 도메인 전문가와 개발자간 지식 공유
- `요구사항 분석`을 잘해야 한다. 요구사항 분석을 첫음에 잘못 하는 경우 엉뚱한 기능을 만들거나 나중에 바로잡기가 힘들어 진다. 그러므로 `요구사항 분석`을 잘하는게 무엇보다 중요하다.
- 요구사항 분석을 잘하려면 무엇을 해야 할까? 바로 개발자와 전문가가 직접 커뮤니케이션 하는 것이다. 중간 전달자가 많으면 많을수록 정보가 왜곡되고, 손실이 발생할 수 있기 때문에 최초 전문가와 많은 대화를 나눠야 한다.
- 또한 개발자도 도메인 전문가 만큼은 아니더라도 도메인 지식을 갖춰야 한다. 해당 도메인을 모르고서 개발을 하는 것은 있을 수 없다.

## 1.3 도메인 모델
- 도메인 모델은 다양하게 작성할 수 있는데, 일단 골자는 `특정 도메인을 개념적으로 표현한 것을 도메인 모델`이라 한다. 즉, `도메인을 설명한 것을 도메인 모델`이라 부를수 있는데, 클래스 다이어그램, UML 다이어그램, 상태 다이어그램등 다양한 방식으로 도메인 모델을 제작 할 수 있다. 어떤것을 써도 상관 없지만 표현하고자 하는 도메인을 가장 잘 나타내고 표현할 수 있는 방식을 쓰는 것이 좋다.

## 1.4 도메인 모델 패턴
- `도메인 계층은 도메인의 핵심 규칙을 구현한다.` 즉 특정 도메인의 중요 업무 규칙이나 프로세스는 해당 도메인 계층에 작성해야 한다는 것이다. 핵심 규칙을 구현한 코드는 도메인 모델에만 위치하기 때문에 규칙이 바뀌거나 규칙을 확장해야 할 때 다른 코드에 영향을 덜 주고 변경 내역을 모델에 반영 할 수 있다.

## 1.5 도메인 모델 도출
- 개발을 하기에 앞서서 기획서, 유스케이스, 사용자 스토리와 같은 요구사항을 분석하여 도메인을 이해하고 이를 바탕으로 도메인 모델 초안을 만들어야 비로소 코딩을 시작할 수 있다. 
- `도메인을 모델링할 때 기본이 되는 작업은 모델을 구성하는 핵심 구성요소, 규칙, 기능을 찾는 것이다.`
- 이렇게 만든 모델은 도메인 전문가, 다른 개발자와 논의하는 과정에 공유되기도 하고, 화이트보드나 위키와 같은 도구를 이용해서 누구나 쉽게 접근 할 수 있도록 해야 한다.

## 1.6 엔티티와 밸류
도메인 모델은 크게 엔티티와 밸류로 구분할 수 있는데, 이 2개를 제대로 구분해야 올바른 도메인 모델을 설계하고 구현할 수 있다. 

### 엔티티
- 엔티티의 가장 큰 특징은 식별자를 가진다는 것이다. 엔티티 객체마다 고유의 식별자를 가지며 이를 통해 다를 객체와 구별할 수 있는 식별자가 된다.
- 엔티티의 식별자는 변경되지 않으며, 엔티티를 생성하고 삭제될 때까지 유지된다.
- 엔티티의 식별자는 다양한 방식으로 생성할 수 있다.
	- 특정 규칙에 따라서 생성하는 법
	- UUID와 Nano ID와 같은 고유 식별자 생성기 사용
	- 값을 직접 입력
	- 일련번호 사용(시퀀스나 DB의 AutoIncrement와 같은 컬럼)

### 밸류
- `도메인 주도 설계 철저 입문`에서 말한 [값 객체](../../도메인%20주도%20설계%20철저%20입문/contents/2.%20값%20객체.md)를 말한다. 값 객체에 대해서는 `도메인 주도 설계 철저 입문`이 조금 더 자세하게 설명되어 있다. 해당 링크를 참조하자.

### 도메인 모델에 Set 메서드 넣지 않기
- 도메인 객체가 불완전한 상태로 사용되는 것을 막기 위해서 객체의 생성 시점에 필요한 모든것을 전달해 주어서 객체를 생성하도록 하자. 중간에 상태를 변경하는 것은 좋지 못하다.
- 또한 만약 Set을 써야 한다 하더라도, 네이밍에 주의하자. 단순히 Set 메서드로 구현하면 도메인 지식이 코드에서 사라지게 된다. Set 메소드를 사용할때 왜 사용하는지 도메인 지식을 녹일 수 있는 네이밍을 사용하도록 하자.

## 1.7 도메인 용어와 유비쿼터스 언어
- 당연한 이야기지만 코드를 작성할때 STEP1, STEP2와 같은 코드를 사용하지 말자. 계속해서 이야기 하지만 코드에 도메인 지식을 녹일 수 있어야 한다. 각 STEP이 무엇을 의미하는지 코드에 녹여서 작성할 수 있어야 한다.
- `또한 도메인 용어를 사용할떄는 전문가, 관계자, 개발자가 도메인과 관련된 공통의 언어를 사용하고 이를 대화, 문서, 도메인 모델, 코드, 테스트등 모든 곳에서 같은 용어를 사용하도록 해야 한다.` 이렇게 하면 소통 과정에서 발생하는 용어의 모호함을 줄일 수 있고 개발자는 도메인과 코드사이에 불필요한 해석 과정을 줄일 수 있다.
- 도메인 용어를 찾는 시간을 아까워하지 말자. 단어 하나가 의미하는 내용은 크게 달라질수 있다.
